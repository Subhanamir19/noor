import type { DailyDua, DailyMission } from '@/types/models';

export const DAILY_DUAS: DailyDua[] = [
  {
    id: 'dua_1',
    arabic: 'اللَّهُمَّ اجْعَلْنِي صَبُورًا',
    transliteration: "Allahumma aj'alni saburan",
    translation: 'O Allah, make me patient.',
    audio_url: null,
  },
  {
    id: 'dua_2',
    arabic: 'رَبِّ اشْرَحْ لِي صَدْرِي',
    transliteration: 'Rabbi ishrah li sadri',
    translation: 'My Lord, expand my chest (grant me confidence).',
    audio_url: null,
  },
  {
    id: 'dua_3',
    arabic: 'اللَّهُمَّ اجْعَلْ كَلِمَاتِي لَطِيفَةً وَقَلْبِي رَحِيمًا',
    transliteration: "Allahumma aj'al kalimati latifatan wa qalbi rahiman",
    translation: 'O Allah, make my words gentle and my heart merciful.',
    audio_url: null,
  },
  {
    id: 'dua_4',
    arabic: 'رَبِّ هَبْ لِي مِن لَّدُنكَ ذُرِّيَّةً طَيِّبَةً',
    transliteration: 'Rabbi hab li min ladunka dhurriyyatan tayyibah',
    translation: 'My Lord, grant me from Yourself good offspring.',
    audio_url: null,
  },
  {
    id: 'dua_5',
    arabic: 'اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْغَضَبِ',
    transliteration: "Allahumma inni a'udhu bika minal-ghadab",
    translation: 'O Allah, I seek refuge in You from anger.',
    audio_url: null,
  },
  {
    id: 'dua_6',
    arabic: 'رَبَّنَا هَبْ لَنَا مِنْ أَزْوَاجِنَا وَذُرِّيَّاتِنَا قُرَّةَ أَعْيُنٍ',
    transliteration: "Rabbana hab lana min azwajina wa dhurriyyatina qurrata a'yun",
    translation: 'Our Lord, grant us from our spouses and children comfort to our eyes.',
    audio_url: null,
  },
  {
    id: 'dua_7',
    arabic: 'اللَّهُمَّ إِنِّي أَسْأَلُكَ الْهُدَى وَالتُّقَى',
    transliteration: "Allahumma inni as'alukal huda wat-tuqa",
    translation: 'O Allah, I ask You for guidance and piety.',
    audio_url: null,
  },
  {
    id: 'dua_8',
    arabic: 'اللَّهُمَّ أَصْلِحْ لِي شَأْنِي كُلَّهُ',
    transliteration: "Allahumma aslih li sha'ni kullah",
    translation: 'O Allah, set right all of my affairs.',
    audio_url: null,
  },
  {
    id: 'dua_9',
    arabic: 'رَبِّ زِدْنِي عِلْمًا',
    transliteration: 'Rabbi zidni ilma',
    translation: 'My Lord, increase me in knowledge.',
    audio_url: null,
  },
  {
    id: 'dua_10',
    arabic: 'اللَّهُمَّ اهْدِنِي وَسَدِّدْنِي',
    transliteration: 'Allahumma ihdini wa saddidni',
    translation: 'O Allah, guide me and keep me steadfast.',
    audio_url: null,
  },
  {
    id: 'dua_11',
    arabic: 'اللَّهُمَّ بَارِكْ لَنَا فِي أَوْلَادِنَا',
    transliteration: 'Allahumma barik lana fi awladina',
    translation: 'O Allah, bless us in our children.',
    audio_url: null,
  },
  {
    id: 'dua_12',
    arabic: 'اللَّهُمَّ اجْعَلْنِي مِنَ الشَّاكِرِينَ',
    transliteration: "Allahumma aj'alni minash-shakirin",
    translation: 'O Allah, make me among the grateful.',
    audio_url: null,
  },
  {
    id: 'dua_13',
    arabic: 'رَبِّ أَعِنِّي وَلَا تُعِنْ عَلَيَّ',
    transliteration: "Rabbi a'inni wa la tu'in alayya",
    translation: 'My Lord, help me and do not help against me.',
    audio_url: null,
  },
  {
    id: 'dua_14',
    arabic: 'اللَّهُمَّ اجْعَلْ هَذَا الْبَيْتَ بَيْتًا صَالِحًا',
    transliteration: "Allahumma aj'al hadhal-bayta baytan salihan",
    translation: 'O Allah, make this home a righteous home.',
    audio_url: null,
  },
  {
    id: 'dua_15',
    arabic: 'اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْهَمِّ وَالْحَزَنِ',
    transliteration: "Allahumma inni a'udhu bika minal-hammi wal-hazan",
    translation: 'O Allah, I seek refuge in You from worry and grief.',
    audio_url: null,
  },
  {
    id: 'dua_16',
    arabic: 'رَبِّ اغْفِرْ لِي وَلِوَالِدَيَّ',
    transliteration: 'Rabbi ghfir li wa liwalidayya',
    translation: 'My Lord, forgive me and my parents.',
    audio_url: null,
  },
  {
    id: 'dua_17',
    arabic: 'اللَّهُمَّ ارْزُقْنِي لِينًا فِي الْقَوْلِ',
    transliteration: "Allahumma-rzuqni linan fil-qawl",
    translation: 'O Allah, grant me gentleness in speech.',
    audio_url: null,
  },
  {
    id: 'dua_18',
    arabic: 'اللَّهُمَّ اجْعَلْنِي مُقِيمَ الصَّلَاةِ وَمِنْ ذُرِّيَّتِي',
    transliteration: "Allahumma aj'alni muqimas-salah wa min dhurriyyati",
    translation: 'O Allah, make me and my children among those who establish prayer.',
    audio_url: null,
  },
  {
    id: 'dua_19',
    arabic: 'اللَّهُمَّ طَهِّرْ قَلْبِي',
    transliteration: 'Allahumma tahhir qalbi',
    translation: 'O Allah, purify my heart.',
    audio_url: null,
  },
  {
    id: 'dua_20',
    arabic: 'رَبِّ اجْعَلْنِي مُبَارَكًا أَيْنَ مَا كُنْتُ',
    transliteration: "Rabbi-j'alni mubarakan ayna ma kunt",
    translation: 'My Lord, make me blessed wherever I am.',
    audio_url: null,
  },
  {
    id: 'dua_21',
    arabic: 'اللَّهُمَّ اكْفِنِي بِحَلَالِكَ عَنْ حَرَامِكَ',
    transliteration: "Allahumma-kfini bihalalika an haramik",
    translation: 'O Allah, suffice me with what is lawful instead of what is unlawful.',
    audio_url: null,
  },
  {
    id: 'dua_22',
    arabic: 'اللَّهُمَّ اجْعَلْنِي رَحْمَةً لِأَهْلِي',
    transliteration: "Allahumma aj'alni rahmatan li-ahli",
    translation: 'O Allah, make me a mercy for my family.',
    audio_url: null,
  },
  {
    id: 'dua_23',
    arabic: 'رَبِّ يَسِّرْ وَلَا تُعَسِّرْ',
    transliteration: "Rabbi yassir wa la tu'assir",
    translation: 'My Lord, make it easy and do not make it difficult.',
    audio_url: null,
  },
  {
    id: 'dua_24',
    arabic: 'اللَّهُمَّ اجْعَلْنِي مِنْ عِبَادِكَ الصَّالِحِينَ',
    transliteration: "Allahumma aj'alni min 'ibadikas-salihin",
    translation: 'O Allah, make me among Your righteous servants.',
    audio_url: null,
  },
  {
    id: 'dua_25',
    arabic: 'اللَّهُمَّ أَلِّفْ بَيْنَ قُلُوبِنَا',
    transliteration: "Allahumma allif bayna qulubina",
    translation: 'O Allah, unite our hearts.',
    audio_url: null,
  },
  {
    id: 'dua_26',
    arabic: 'رَبِّ اجْعَلْ هَذَا يَوْمًا طَيِّبًا',
    transliteration: "Rabbi-j'al hadha yawman tayyiban",
    translation: 'My Lord, make this a good day.',
    audio_url: null,
  },
  {
    id: 'dua_27',
    arabic: 'اللَّهُمَّ اجْعَلْنِي مُحْسِنًا',
    transliteration: "Allahumma aj'alni muhsinan",
    translation: 'O Allah, make me a person of excellence.',
    audio_url: null,
  },
  {
    id: 'dua_28',
    arabic: 'اللَّهُمَّ اجْعَلْنِي هَادِيًا مَهْدِيًّا',
    transliteration: "Allahumma aj'alni hadiyan mahdiyya",
    translation: 'O Allah, make me guided and a guide.',
    audio_url: null,
  },
  {
    id: 'dua_29',
    arabic: 'رَبِّ نَوِّرْ قَلْبِي',
    transliteration: 'Rabbi nawwir qalbi',
    translation: 'My Lord, illuminate my heart.',
    audio_url: null,
  },
  {
    id: 'dua_30',
    arabic: 'اللَّهُمَّ اجْعَلْ آخِرَ كَلَامِنَا لَا إِلٰهَ إِلَّا اللهُ',
    transliteration: "Allahumma aj'al akhir kalamina la ilaha illallah",
    translation: 'O Allah, make our last words “There is no god but Allah”.',
    audio_url: null,
  },
];

export const DAILY_MISSIONS: DailyMission[] = [
  {
    id: 'mission_1',
    title: 'Teach “Bismillah” Before Eating',
    description:
      'Say “Bismillah” together before breakfast today. Explain it means “In the name of Allah” and we do it to remember Him.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_2',
    title: 'Practice Sharing During Play',
    description:
      'During playtime, encourage your child to share one toy. Praise them with “MashaAllah!” when they try.',
    duration_minutes: 5,
    age_group: 'toddler',
    category: 'character',
  },
  {
    id: 'mission_3',
    title: 'Make a Simple Dua Together',
    description:
      'Before bedtime, make one short dua together. Keep it simple and sincere.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'prayer',
  },
  {
    id: 'mission_4',
    title: 'Read a Prophet Story (7 minutes)',
    description:
      "Spend 7 minutes reading a story of Prophet Yusuf’s patience. Ask: “What can we learn from this?”",
    duration_minutes: 7,
    age_group: 'child',
    category: 'story',
  },
  {
    id: 'mission_5',
    title: 'Teach Right-Hand Eating',
    description:
      'Gently remind your child to eat with their right hand today. Celebrate effort, not perfection.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_6',
    title: 'Practice Saying Salaam',
    description:
      'Teach “Assalamu Alaikum” and practice greeting family members at least 3 times today.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_7',
    title: 'Three Gratitudes at Dinner',
    description:
      'At dinner, ask: “What are three things Allah gave us today?” Help them say “Alhamdulillah”.',
    duration_minutes: 5,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_8',
    title: 'One Kind Word Challenge',
    description:
      'Say one kind word to your child today when they least expect it. Name the good you see.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_9',
    title: 'Pause Before Responding',
    description:
      'Pick one moment today to pause, breathe, and respond calmly (even if you need a do-over).',
    duration_minutes: 2,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_10',
    title: 'Teach “Astaghfirullah” After a Mistake',
    description:
      'When someone makes a small mistake today, model saying “Astaghfirullah” and starting again gently.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_11',
    title: '5-Minute Cleanup Together',
    description:
      'Set a 5-minute timer and tidy together. Keep it playful and praise teamwork.',
    duration_minutes: 5,
    age_group: 'toddler',
    category: 'habit',
  },
  {
    id: 'mission_12',
    title: 'Quiet Listening (2 minutes)',
    description:
      'Give your child 2 full minutes of uninterrupted listening. Reflect back what you heard.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_13',
    title: 'Bedtime Dhikr',
    description:
      'Before sleep, say a short dhikr together (even 10 seconds). Keep it warm and consistent.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'prayer',
  },
  {
    id: 'mission_14',
    title: 'Teach “Please” and “Thank You”',
    description:
      'Practice “please” and “thank you” today and connect it to good character (adab).',
    duration_minutes: 4,
    age_group: 'child',
    category: 'character',
  },
  {
    id: 'mission_15',
    title: 'Gentle Hands Reminder',
    description:
      'Use the phrase “gentle hands” when emotions run high. Show what gentle looks like.',
    duration_minutes: 3,
    age_group: 'toddler',
    category: 'character',
  },
  {
    id: 'mission_16',
    title: 'Make Wudu Practice Fun',
    description:
      'If age-appropriate, practice a “mini wudu” routine with play (hands/face). Keep it light.',
    duration_minutes: 5,
    age_group: 'child',
    category: 'prayer',
  },
  {
    id: 'mission_17',
    title: 'Storytime Question',
    description:
      'During storytime, ask one reflection question: “What was the best choice in the story?”',
    duration_minutes: 5,
    age_group: 'child',
    category: 'story',
  },
  {
    id: 'mission_18',
    title: 'Sunnah Smile',
    description:
      'Smile intentionally at your child 3 times today, especially during a tough moment.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_19',
    title: 'Teach “Amin”',
    description:
      'When you make dua today, invite your child to say “Amin” with you.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'prayer',
  },
  {
    id: 'mission_20',
    title: 'Name the Feeling',
    description:
      'Help your child name one emotion today (“sad”, “mad”, “scared”, “happy”) without judging it.',
    duration_minutes: 4,
    age_group: 'toddler',
    category: 'character',
  },
  {
    id: 'mission_21',
    title: 'Make a Dua for Someone Else',
    description:
      'Make a short dua together for someone you love. Teach that we care for others too.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'prayer',
  },
  {
    id: 'mission_22',
    title: 'No-Phone Micro Moment',
    description:
      'Put your phone away for one micro moment (5 minutes) and connect fully.',
    duration_minutes: 5,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_23',
    title: 'Teach “Sorry” + Repair',
    description:
      'Model a repair today: “I’m sorry I raised my voice. Let’s try again.” Invite them to repair too.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_24',
    title: 'One Sunnah Habit: Right Foot First',
    description:
      'Practice stepping into the home or room with the right foot first (age-appropriate).',
    duration_minutes: 2,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_25',
    title: '2-Minute Sadaqah Talk',
    description:
      'Talk about giving: “We share because Allah loves generosity.” Pick one tiny act of giving.',
    duration_minutes: 2,
    age_group: 'child',
    category: 'character',
  },
  {
    id: 'mission_26',
    title: 'Practice “Alhamdulillah” After a Treat',
    description:
      'After a snack or treat, say “Alhamdulillah” together. Make it your family’s happy habit.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'habit',
  },
  {
    id: 'mission_27',
    title: 'Small Act of Service',
    description:
      'Invite your child to help with one small task today (carry something, wipe a table). Praise service.',
    duration_minutes: 4,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_28',
    title: 'Breathing Together',
    description:
      'Do 3 slow breaths together when emotions rise. Teach: “We calm our body first.”',
    duration_minutes: 2,
    age_group: 'all',
    category: 'character',
  },
  {
    id: 'mission_29',
    title: 'Short Quran Listening',
    description:
      'Play a short recitation (even 1 minute). Let it be background calm during a transition.',
    duration_minutes: 2,
    age_group: 'all',
    category: 'prayer',
  },
  {
    id: 'mission_30',
    title: 'End the Day with a Warm Dua',
    description:
      'Before sleep, make a warm dua for your child by name. Keep it simple, loving, and consistent.',
    duration_minutes: 3,
    age_group: 'all',
    category: 'prayer',
  },
];

const MS_PER_DAY = 86_400_000;

function dayOfYear(date: Date): number {
  const start = new Date(date.getFullYear(), 0, 0);
  const diff = date.getTime() - start.getTime();
  return Math.floor(diff / MS_PER_DAY);
}

export const getMissionForDate = (
  date: Date
): { dua: DailyDua; mission: DailyMission } => {
  const index = dayOfYear(date);
  const dua = DAILY_DUAS[index % DAILY_DUAS.length];
  const mission = DAILY_MISSIONS[index % DAILY_MISSIONS.length];
  return { dua, mission };
};

export const getTodaysMission = () => getMissionForDate(new Date());

